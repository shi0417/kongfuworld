# 多文件上传功能说明

## 功能概述

小说上传系统现在支持多种文件格式和多文件上传，用户可以选择多个文件并按照指定顺序进行上传和处理。

## 支持的文件格式

- **Word文档**: `.docx`, `.doc`
- **PDF文档**: `.pdf` (解析功能待实现)
- **文本文件**: `.txt`

## 主要功能

### 1. 多文件选择
- 支持同时选择多个文件
- 支持拖拽上传
- 文件格式自动验证

### 2. 文件管理
- 显示已选择的文件列表
- 显示文件大小和名称
- 支持删除单个文件
- 支持清空所有文件

### 3. 文件排序
- 按文件名排序
- 按文件大小排序
- 按修改时间排序
- 支持重新排序功能

### 4. 章节处理
- 自动解析所有文件中的章节
- 按章节号自动排序
- 合并所有文件的章节内容

## 使用流程

### 1. 选择文件
- 点击上传区域选择文件
- 或直接拖拽文件到上传区域
- 支持选择多个文件

### 2. 文件排序
- 选择文件后，可以设置处理顺序
- 选择排序方式：文件名、大小、修改时间
- 点击"重新排序"按钮应用排序

### 3. 文件管理
- 查看已选择的文件列表
- 删除不需要的文件
- 清空所有文件重新选择

### 4. 章节预览
- 系统自动解析所有文件
- 显示合并后的章节列表
- 按章节号排序显示

### 5. 上传提交
- 确认章节内容无误
- 点击"提交上传"
- 系统将按文件顺序处理并上传

## 技术实现

### 前端
- 使用 `FileList` API 处理多文件
- 拖拽上传支持
- 文件排序和过滤
- 进度显示和状态管理

### 后端
- 使用 `multer.array()` 处理多文件
- 支持多种文件格式解析
- 文件格式验证
- 临时文件管理

## 注意事项

1. **文件大小限制**: 单个文件最大50MB
2. **文件格式**: 目前PDF解析功能暂未实现
3. **章节排序**: 系统会按章节号自动排序
4. **临时文件**: 上传完成后会自动删除临时文件

## 后续改进

1. 实现PDF文件解析功能
2. 添加文件预览功能
3. 支持更多文件格式
4. 优化大文件处理性能 