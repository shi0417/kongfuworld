<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Rewards System Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #404040;
        }
        .test-button {
            background: #007bff;
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            background: #1a1a1a;
            border: 1px solid #404040;
            border-radius: 4px;
            padding: 10px;
            margin-top: 10px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .success {
            color: #4ade80;
        }
        .error {
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—ï¸ Daily Rewards System Test</h1>
        
        <div class="test-section">
            <h2>1. æ•°æ®åº“è¿æ¥æµ‹è¯•</h2>
            <button class="test-button" onclick="testDatabaseConnection()">æµ‹è¯•æ•°æ®åº“è¿æ¥</button>
            <div id="db-result" class="result"></div>
        </div>

        <div class="test-section">
            <h2>2. ä»»åŠ¡ç³»ç»ŸAPIæµ‹è¯•</h2>
            <button class="test-button" onclick="testMissionAPI()">æµ‹è¯•ä»»åŠ¡API</button>
            <div id="mission-result" class="result"></div>
        </div>

        <div class="test-section">
            <h2>3. ç­¾åˆ°ç³»ç»ŸAPIæµ‹è¯•</h2>
            <button class="test-button" onclick="testCheckinAPI()">æµ‹è¯•ç­¾åˆ°API</button>
            <div id="checkin-result" class="result"></div>
        </div>

        <div class="test-section">
            <h2>4. é¡µé¢è®¿é—®æµ‹è¯•</h2>
            <p>è¯·è®¿é—®ä»¥ä¸‹é¡µé¢æµ‹è¯•Daily Rewardsç•Œé¢ï¼š</p>
            <ul>
                <li><a href="http://localhost:3000/user-center?tab=daily-rewards" target="_blank" style="color: #007bff;">User Center - Daily Rewards</a></li>
                <li><a href="http://localhost:3000/daily-rewards" target="_blank" style="color: #007bff;">ç‹¬ç«‹ Daily Rewards é¡µé¢</a></li>
            </ul>
        </div>

        <div class="test-section">
            <h2>5. åŠŸèƒ½è¯´æ˜</h2>
            <h3>Login Rewards (ç­¾åˆ°å¥–åŠ±)</h3>
            <ul>
                <li>7å¤©å¾ªç¯ç­¾åˆ°ç³»ç»Ÿ</li>
                <li>è¿ç»­ç­¾åˆ°å¤©æ•°è¿½è¸ª</li>
                <li>é’¥åŒ™å¥–åŠ±ï¼š3-6æŠŠé’¥åŒ™/å¤©</li>
                <li>é˜²é‡å¤ç­¾åˆ°æœºåˆ¶</li>
            </ul>
            
            <h3>Mission Rewards (ä»»åŠ¡å¥–åŠ±)</h3>
            <ul>
                <li>é˜…è¯»ä»»åŠ¡ï¼šRead 2/5/10 chapters</li>
                <li>è‡ªåŠ¨è¿›åº¦è¿½è¸ªï¼šé˜…è¯»ç« èŠ‚æ—¶è‡ªåŠ¨æ›´æ–°</li>
                <li>å¥–åŠ±é¢†å–ï¼šå®Œæˆä»»åŠ¡åå¯é¢†å–é’¥åŒ™</li>
                <li>çŠ¶æ€ç®¡ç†ï¼šIn Progress / Completed / Claimed</li>
            </ul>
        </div>
    </div>

    <script>
        async function testDatabaseConnection() {
            const resultDiv = document.getElementById('db-result');
            resultDiv.innerHTML = 'æ­£åœ¨æµ‹è¯•æ•°æ®åº“è¿æ¥...';
            
            try {
                const response = await fetch('http://localhost:5000/api/mission/user/1');
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `<span class="success">âœ… æ•°æ®åº“è¿æ¥æˆåŠŸï¼</span>\n\nä»»åŠ¡æ•°æ®ï¼š\n${JSON.stringify(data, null, 2)}`;
                } else {
                    resultDiv.innerHTML = `<span class="error">âŒ æ•°æ®åº“è¿æ¥å¤±è´¥ï¼š${data.message}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ è¿æ¥é”™è¯¯ï¼š${error.message}</span>`;
            }
        }

        async function testMissionAPI() {
            const resultDiv = document.getElementById('mission-result');
            resultDiv.innerHTML = 'æ­£åœ¨æµ‹è¯•ä»»åŠ¡API...';
            
            try {
                const response = await fetch('http://localhost:5000/api/mission/user/1');
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `<span class="success">âœ… ä»»åŠ¡APIæµ‹è¯•æˆåŠŸï¼</span>\n\nä»»åŠ¡åˆ—è¡¨ï¼š\n${JSON.stringify(data.data.missions, null, 2)}`;
                } else {
                    resultDiv.innerHTML = `<span class="error">âŒ ä»»åŠ¡APIæµ‹è¯•å¤±è´¥ï¼š${data.message}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ APIé”™è¯¯ï¼š${error.message}</span>`;
            }
        }

        async function testCheckinAPI() {
            const resultDiv = document.getElementById('checkin-result');
            resultDiv.innerHTML = 'æ­£åœ¨æµ‹è¯•ç­¾åˆ°API...';
            
            try {
                const response = await fetch('http://localhost:5000/api/checkin/status/1');
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `<span class="success">âœ… ç­¾åˆ°APIæµ‹è¯•æˆåŠŸï¼</span>\n\nç­¾åˆ°çŠ¶æ€ï¼š\n${JSON.stringify(data.data, null, 2)}`;
                } else {
                    resultDiv.innerHTML = `<span class="error">âŒ ç­¾åˆ°APIæµ‹è¯•å¤±è´¥ï¼š${data.message}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ APIé”™è¯¯ï¼š${error.message}</span>`;
            }
        }
    </script>
</body>
</html>
