# Facebook 应用设置完整步骤

## 情况1：如果找不到现有应用

### 步骤1：创建新应用

1. 访问 https://developers.facebook.com/
2. 点击右上角"我的应用" → "创建应用"
3. 选择应用类型：**消费者**
4. 填写应用信息：
   - **应用显示名称**：KongFuWorld
   - **应用联系邮箱**：你的邮箱地址
   - **应用用途**：网站登录
5. 点击"创建应用"

### 步骤2：添加 Facebook 登录产品

1. 在应用仪表板中，找到"添加产品"或"产品"菜单
2. 找到"Facebook 登录"，点击"设置"
3. 选择平台：**网站**

### 步骤3：配置基本设置

在"设置" → "基本"中：

1. **应用域名**：`localhost`
2. **隐私政策URL**：`http://localhost:3000/privacy`（可选）
3. **服务条款URL**：`http://localhost:3000/terms`（可选）
4. **网站** → **网站URL**：`http://localhost:3000`

### 步骤4：配置 Facebook 登录设置

在"产品" → "Facebook 登录" → "设置"中：

1. **有效 OAuth 重定向 URI**，添加以下URI（每行一个）：
   ```
   http://localhost:3000/
   http://localhost:3000/login
   http://localhost:3000/register
   ```

2. **客户端 OAuth 登录**：启用
3. **Web OAuth 登录**：启用

### 步骤5：配置权限

在"应用审核" → "权限和功能"中：

1. 确保以下权限可用：
   - ✅ `email` - 获取用户邮箱
   - ✅ `public_profile` - 获取用户基本信息

2. 如果权限需要审核：
   - 在开发模式下，只有应用管理员和测试用户可以使用
   - 可以添加测试用户：设置 → 角色 → 测试用户

### 步骤6：获取 App ID 和 App Secret

1. 在"设置" → "基本"中：
   - **应用编号（App ID）**：复制这个ID
   - **应用密钥（App Secret）**：点击"显示"，复制密钥（需要密码确认）

### 步骤7：更新代码配置

1. 创建或更新 `frontend/.env` 文件：
   ```env
   REACT_APP_FACEBOOK_APP_ID=你的新App_ID
   ```

2. 或者直接在代码中更新（不推荐用于生产环境）：
   - 文件：`frontend/src/components/SocialLogin/SocialLogin.tsx`
   - 第28行：更新 `FACEBOOK_APP_ID` 的默认值

3. 重启前端开发服务器：
   ```bash
   cd frontend
   npm start
   ```

## 情况2：如果应用被归档

1. 在左侧筛选条件中，点击"已归档"
2. 找到你的应用
3. 点击应用名称进入
4. 在应用设置中，点击"取消归档"或"恢复应用"

## 情况3：检查其他可能的问题

### 检查登录账户
- 确认你登录的是创建应用时使用的Facebook账户
- 如果应用是团队创建的，确保你有访问权限

### 检查应用状态
- 应用可能被禁用或删除
- 检查是否有待处理的操作（"必要操作"标签）

### 使用应用编号搜索
- 如果你记得App ID（如：989475010031730），在搜索框中输入
- 搜索框位置：页面顶部"搜索应用名称或编号"

## 测试步骤

1. 确保应用处于"开发模式"
2. 添加测试用户（如果需要）：
   - 设置 → 角色 → 测试用户 → 添加
3. 测试登录：
   - 访问 `http://localhost:3000/register`
   - 点击"Continue with Facebook"
   - 使用测试用户或应用管理员账户登录

## 常见问题

### Q: 应用创建后无法使用？
A: 确保应用处于"开发模式"，并且已添加测试用户

### Q: 登录时提示权限被拒绝？
A: 检查是否在"权限和功能"中申请了 `email` 和 `public_profile` 权限

### Q: 重定向URI不匹配？
A: 确保OAuth重定向URI完全匹配，包括协议（http/https）和端口号

### Q: 网络连接问题？
A: 某些地区访问Facebook API可能需要VPN或代理

## 生产环境配置

当部署到生产环境时：

1. 在Facebook应用设置中添加生产域名
2. 更新OAuth重定向URI为生产URL
3. 将应用从"开发模式"切换到"上线模式"
4. 提交应用审核（如果需要公开使用）
















