# ç« èŠ‚æ’åºæœ€ç»ˆä¿®å¤æ€»ç»“

## ä¿®å¤æ¦‚è¿°

æ ¹æ®ç”¨æˆ·è¦æ±‚ï¼Œå·²æˆåŠŸä¿®å¤920-1176è¡Œç« èŠ‚åˆ—è¡¨çš„æ’åºé—®é¢˜ï¼Œä½¿å…¶ä¸778-798è¡Œæ–‡ä»¶æ’åºåŠŸèƒ½ä¿æŒä¸€è‡´ï¼Œç¡®ä¿ç« èŠ‚æŒ‰æ­£ç¡®çš„é¡ºåºæ˜¾ç¤ºã€‚

## ä¸»è¦ä¿®å¤å†…å®¹

### 1. ç« èŠ‚åˆ—è¡¨æ’åºä¼˜åŒ– (920-1176è¡Œ)

#### æ’åºé€»è¾‘
```javascript
{chapters
  .slice() // åˆ›å»ºå‰¯æœ¬é¿å…ä¿®æ”¹åŸæ•°ç»„
  .sort((a, b) => {
    const aNum = a.chapterNumber || 0;
    const bNum = b.chapterNumber || 0;
    return aNum - bNum;
  })
  .map((chapter, displayIndex) => {
    // æ‰¾åˆ°åŸå§‹ç« èŠ‚åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•
    const originalIndex = chapters.findIndex(ch => ch.id === chapter.id);
    return (
      // æ¸²æŸ“é€»è¾‘
    );
  })}
```

#### ç« èŠ‚æ ‡é¢˜æ˜¾ç¤ºä¼˜åŒ–
```javascript
<h3>
  {(() => {
    // æ ¹æ®ç« èŠ‚æ ‡é¢˜åˆ¤æ–­ç« èŠ‚ç±»å‹
    const title = chapter.title;
    const chapterNumber = chapter.chapterNumber || (startChapterNumber + originalIndex);
    
    if (title.includes('å›')) {
      return `ç¬¬${chapterNumber}å›: ${title}`;
    } else if (title.includes('èŠ‚')) {
      return `ç¬¬${chapterNumber}èŠ‚: ${title}`;
    } else {
      return `ç¬¬${chapterNumber}ç« : ${title}`;
    }
  })()}
</h3>
```

### 2. æ·»åŠ ç« èŠ‚æ’åºæ§åˆ¶ (ç±»ä¼¼778-798è¡Œæ–‡ä»¶æ’åº)

#### ç« èŠ‚æ’åºé€‰é¡¹
```javascript
{/* ç« èŠ‚æ’åºé€‰é¡¹ */}
<div className={styles.chapterSortOptions}>
  <label>ç« èŠ‚æ˜¾ç¤ºé¡ºåºï¼š</label>
  <select
    value="chapterNumber"
    className={styles.sortSelect}
    disabled
  >
    <option value="chapterNumber">æŒ‰ç« èŠ‚å·æ’åº</option>
  </select>
  <button 
    onClick={() => {
      // é‡æ–°æŒ‰ç« èŠ‚å·æ’åº
      setChapters(prev => [...prev].sort((a, b) => {
        const aNum = a.chapterNumber || 0;
        const bNum = b.chapterNumber || 0;
        return aNum - bNum;
      }));
    }}
    className={styles.reorderButton}
    title="é‡æ–°æŒ‰ç« èŠ‚å·æ’åº"
  >
    ğŸ”„ é‡æ–°æ’åº
  </button>
</div>
```

### 3. åˆ é™¤ç¡®è®¤ä¿¡æ¯ä¼˜åŒ–

#### æ™ºèƒ½ç« èŠ‚ç±»å‹è¯†åˆ«
```javascript
const chapterNumber = chapter.chapterNumber || (startChapterNumber + originalIndex);
const title = chapter.title;
let chapterType = 'ç« ';
if (title.includes('å›')) chapterType = 'å›';
else if (title.includes('èŠ‚')) chapterType = 'èŠ‚';

if (window.confirm(`ç¡®å®šè¦åˆ é™¤"ç¬¬${chapterNumber}${chapterType}: ${title}"å—ï¼Ÿ`)) {
  // åˆ é™¤é€»è¾‘
}
```

### 4. CSSæ ·å¼ç»Ÿä¸€

#### æ’åºé€‰é¡¹æ ·å¼
```css
.fileSortOptions,
.chapterSortOptions {
  margin: 15px 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  flex-wrap: wrap;
}
```

## ä¿®å¤æ•ˆæœ

### 1. æ­£ç¡®çš„ç« èŠ‚æ’åº
- ç« èŠ‚åˆ—è¡¨æŒ‰å®é™…ç« èŠ‚å·æ’åºï¼Œè€Œä¸æ˜¯æŒ‰æ–‡ä»¶è§£æé¡ºåº
- "ç¬¬å…«åä¸€å›"æ­£ç¡®æ˜¾ç¤ºä¸ºç¬¬81å›ï¼Œè€Œä¸æ˜¯ç¬¬1ç« 

### 2. æ™ºèƒ½ç« èŠ‚ç±»å‹è¯†åˆ«
- è‡ªåŠ¨è¯†åˆ«ç« èŠ‚ç±»å‹ï¼ˆç« ã€å›ã€èŠ‚ï¼‰
- æ˜¾ç¤ºæ ¼å¼ï¼šç¬¬Xç« ã€ç¬¬Xå›ã€ç¬¬XèŠ‚

### 3. ç”¨æˆ·å‹å¥½çš„æ’åºæ§åˆ¶
- æ·»åŠ é‡æ–°æ’åºæŒ‰é’®ï¼Œç”¨æˆ·å¯ä»¥æ‰‹åŠ¨é‡æ–°æ’åº
- ä¸æ–‡ä»¶æ’åºåŠŸèƒ½ä¿æŒä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ

### 4. ä¿æŒåŠŸèƒ½å®Œæ•´æ€§
- æ‰€æœ‰ç¼–è¾‘ã€åˆ é™¤ã€è‡ªåŠ¨é€’å¢ç­‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- ä½¿ç”¨ `originalIndex` ç¡®ä¿åŠŸèƒ½ä¸å—æ’åºå½±å“

## æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. æ’åºç®—æ³•
- ä½¿ç”¨ `slice()` åˆ›å»ºæ•°ç»„å‰¯æœ¬ï¼Œé¿å…ä¿®æ”¹åŸæ•°ç»„
- æŒ‰ `chapterNumber` å­—æ®µæ’åºï¼Œæ”¯æŒä¸­æ–‡æ•°å­—å’Œé˜¿æ‹‰ä¼¯æ•°å­—
- ä½¿ç”¨ `findIndex` æ‰¾åˆ°åŸå§‹ç´¢å¼•ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸

### 2. ç« èŠ‚ç±»å‹è¯†åˆ«
- é€šè¿‡ `title.includes()` åˆ¤æ–­ç« èŠ‚ç±»å‹
- æ”¯æŒ"ç« "ã€"å›"ã€"èŠ‚"ä¸‰ç§ç±»å‹
- é»˜è®¤æ˜¾ç¤ºä¸º"ç« "

### 3. çŠ¶æ€ç®¡ç†
- ä½¿ç”¨ `originalIndex` ç»´æŠ¤ç« èŠ‚åœ¨åŸå§‹æ•°ç»„ä¸­çš„ä½ç½®
- ç¡®ä¿è‡ªåŠ¨é€’å¢ã€åˆ é™¤ç­‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- ä¿æŒç”¨æˆ·äº¤äº’çŠ¶æ€çš„ä¸€è‡´æ€§

## æµ‹è¯•éªŒè¯

### ç« èŠ‚å·æå–æµ‹è¯•
```
"ç¬¬å…«åä¸€å› å æ—ºç›¸å››ç¾é’“æ¸¸é±¼ å¥‰ä¸¥è¯ä¸¤ç•ªå…¥å®¶å¡¾" -> ç« èŠ‚å·: 81 âœ“
"ç¬¬ä¸€ç«  å¼€å§‹" -> ç« èŠ‚å·: 1 âœ“
"ç¬¬2ç«  ç»§ç»­" -> ç« èŠ‚å·: 2 âœ“
"ç¬¬ä¸‰å› æ•…äº‹" -> ç« èŠ‚å·: 3 âœ“
"ç¬¬4èŠ‚ å†…å®¹" -> ç« èŠ‚å·: 4 âœ“
"ç¬¬äº”ç«  ç»“å°¾" -> ç« èŠ‚å·: 5 âœ“
```

### æ’åºæ•ˆæœ
- ç« èŠ‚æŒ‰ç« èŠ‚å·ä»å°åˆ°å¤§æ’åº
- æ”¯æŒä¸­æ–‡æ•°å­—å’Œé˜¿æ‹‰ä¼¯æ•°å­—æ··åˆæ’åº
- é‡æ–°æ’åºåŠŸèƒ½æ­£å¸¸å·¥ä½œ

## æ€»ç»“

é€šè¿‡è¿™æ¬¡ä¿®å¤ï¼Œç« èŠ‚åˆ—è¡¨ç°åœ¨èƒ½å¤Ÿï¼š
1. âœ… æ­£ç¡®æŒ‰ç« èŠ‚å·æ’åºæ˜¾ç¤º
2. âœ… æ™ºèƒ½è¯†åˆ«ç« èŠ‚ç±»å‹å¹¶æ­£ç¡®æ˜¾ç¤º
3. âœ… æä¾›ç”¨æˆ·å‹å¥½çš„æ’åºæ§åˆ¶
4. âœ… ä¿æŒæ‰€æœ‰åŸæœ‰åŠŸèƒ½çš„å®Œæ•´æ€§
5. âœ… ä¸æ–‡ä»¶æ’åºåŠŸèƒ½ä¿æŒä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ

ä¿®å¤åçš„ç³»ç»Ÿèƒ½å¤Ÿæ­£ç¡®å¤„ç†å„ç§ç« èŠ‚æ ¼å¼ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„å°è¯´ä¸Šä¼ å’Œç®¡ç†ä½“éªŒã€‚ 